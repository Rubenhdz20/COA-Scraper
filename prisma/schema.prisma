generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"  // changed from sqlite
  url      = env("DATABASE_URL")
}

model CoaDocument {
  id               String   @id @default(cuid())
  originalName     String
  filePath         String   @default("")  // Add default value
  fileSize         Int
  uploadDate       DateTime @default(now())
  processingStatus String   @default("pending")
  
  // OCR Results
  rawText          String?
  ocrProvider      String?
  confidence       Int?
  
  // Extracted Data 
  batchId          String?
  strainName       String?
  category         String?   // NEW FIELD
  subCategory      String?   // NEW FIELD
  thcPercentage    Float?
  cbdPercentage    Float?
  totalCannabinoids Float?
  labName          String?
  testDate         DateTime?
  terpenes         String?   // JSON string
  
  @@map("coa_documents")
}